<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>What's My Profit?</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
  <body>
    <div id="homeselling">
    <h1>{{ heading }}</h1>
    <form>
      <p>{{ homeprice }}: <input type="number" id="price" maxlength="8" size="8" class=""></p>
      <p>{{ realtorfee }}: <input type="number" id="fee" maxlength="3" size="3" value="6" class=""></p>
      <p>{{ mortgage }}: <input type="number" id="mortgage" maxlength="8" size="8" class=""></p>
      <br>
      <button type="button" @click="calculateProfit" class="btn btn-lg btn-success">What's My Profit?</button>
      <div id="takehome"></div>
      <div id="result"></div>
    </form>
  </div>

  <script src="http://cdn.jsdelivr.net/vue/1.0.16/vue.js"></script>

  <script>
    var vm = new Vue({
      el: '#homeselling',
      data: {
        heading: "What's My Profit?",
        homeprice: "Home Price",
        realtorfee: "Realtor fee (in percent)",
        mortgage: "Mortgage amount",
      },
      methods: {
        currencyFormat: function(num) {
          // As seen at https://blog.tompawlak.org/number-currency-formatting-javascript.
          return "$" + num.toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,")
        },
        calculateProfit: function(num) {
          var price = document.getElementById('price').value;
          var fee = document.getElementById('fee').value / 100;
          var mortgage = document.getElementById('mortgage').value;

          var takehome = (price - (price * fee));
          var profit = takehome - mortgage;
          document.getElementById('takehome').innerHTML = '<p>Your takehome money after the Realtor fee will be <strong>' + vm.currencyFormat(takehome) + '</strong>.</p>';
          document.getElementById('result').innerHTML = '<p>Your profit after paying off your mortgage will be <strong>' + vm.currencyFormat(profit) + '</strong>.</p>';
          return false;
        }
      }
    });
  </script>
  </body>
</html>
